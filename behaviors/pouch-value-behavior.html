<script>
  
  var PouchBehaviors = PouchBehaviors || {};
  
  PouchBehaviors.PouchValueBehavior = {
    
    properties: {
      
      /**
       * Id of the document
       */ 
      id: {
        
        type: String,
        value: '',
        notify: false,
        reflectToAttribute: false
        
      },
      
      /**
       * Reference to the pouchdb database
       */ 
      db: {
        
        type: Object,
        notify: false,
        reflectToAttribute: false
        
      },
      
      /**
       * Value associated with this document
       */ 
      value: {
        
        type: Object,
        value: null,
        notify: true,
        reflectToAttribute: true
        
      }
      
    },
    
    /**
     * Delete the document from pouch
     */ 
    delete: function () {
      
      var that = this;
      
      //Delete the value
      this.db.remove( this.value ).then( function ( result ) {
        
        that.set( 'value', null );
        
      }).catch( this._handlePouchError );
      
    },
    
    /**
     * Called when an error occurs manipulating a pouch document
     */ 
    _handlePouchError: function ( err ) {
        
      that.fire( 'pouch-error', err );
      
    }
    
  };
  
</script>